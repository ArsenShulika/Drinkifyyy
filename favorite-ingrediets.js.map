{"version":3,"file":"favorite-ingrediets.js","sources":["../src/js/modules/init-ingredients.js"],"sourcesContent":["import { setupModalFavoriteButton } from './modal';\nimport { ingredientsTemplateModal, renderIngredients } from './render-function';\n\nlet favoriteIngredients =\n  JSON.parse(localStorage.getItem('favoriteIngredients')) || [];\n\nconst refs = {\n  cocktailList: document.querySelector('.js-favorite-ingredients-list'),\n  titel: document.querySelector('.js-titel'),\n  notFoundContainer: document.querySelector('.js-image-not-found-container'),\n  backdrop: document.querySelector('.backdrop'),\n};\n\nif (favoriteIngredients.length === 0) {\n  refs.notFoundContainer.classList.remove('visually-hidden');\n} else {\n  const markup = renderIngredients(favoriteIngredients);\n  refs.cocktailList.innerHTML = markup;\n}\n\n// ! DELETE FROM FAVORITE\n\nrefs.cocktailList.addEventListener('click', handleChangeFavoriteStatus);\n\nfunction handleChangeFavoriteStatus(e) {\n  const deleteBtn = e.target.closest('[data-type=\"addLikeToFavorite\"]');\n  if (!deleteBtn) return;\n\n  const card = e.target.closest('.ingredients-list-item');\n\n  if (!card) return;\n\n  const ingredientId = card.dataset.id;\n\n  card.remove();\n\n  const ingredient = favoriteIngredients.find(i => i._id === ingredientId);\n  if (!ingredient) return;\n\n  favoriteIngredients = favoriteIngredients.filter(\n    ingr => ingr._id !== ingredientId\n  );\n  localStorage.setItem(\n    'favoriteIngredients',\n    JSON.stringify(favoriteIngredients)\n  );\n\n  if (favoriteIngredients.length === 0) {\n    refs.notFoundContainer.classList.remove('visually-hidden');\n  }\n}\n\n//! --- OPEN MODAL ---\n\nrefs.cocktailList.addEventListener('click', showModalIngredients);\n\nfunction showModalIngredients(e) {\n  const learnMoreBtn = e.target.closest('[data-type=\"learnMore\"]');\n\n  if (learnMoreBtn) {\n    const card = learnMoreBtn.closest('.ingredients-list-item');\n    if (!card || !favoriteIngredients.length) return;\n\n    const ingredientId = card.dataset.id;\n    const ingredient = favoriteIngredients.find(\n      ingr => ingr._id === ingredientId\n    );\n\n    refs.backdrop.innerHTML = ingredientsTemplateModal(ingredient);\n    refs.backdrop.classList.remove('visually-hidden');\n\n    const nestedModalContainer = document.querySelector(\n      '.nested-ingredient-modal'\n    );\n    if (nestedModalContainer) {\n      nestedModalContainer.innerHTML = ingredientsTemplateModal(ingredient);\n    }\n\n    setupModalFavoriteButton(ingredient, refs.backdrop);\n  }\n}\n\n//!одинакова модалка init-favorites.js i cocktails.js;\n\nrefs.backdrop.addEventListener('click', function (e) {\n  const isCloseBtn = e.target.closest('[data-type=\"close-btn\"]');\n  const isOutsideModal = e.target === refs.backdrop;\n  const isBackBtn = e.target.closest('[data-type=\"backBtn\"]');\n\n  if (isCloseBtn || isOutsideModal || isBackBtn) {\n    refs.backdrop.classList.add('visually-hidden');\n  }\n});\n"],"names":["favoriteIngredients","refs","markup","renderIngredients","handleChangeFavoriteStatus","card","ingredientId","i","ingr","showModalIngredients","learnMoreBtn","ingredient","ingredientsTemplateModal","nestedModalContainer","setupModalFavoriteButton","isCloseBtn","isOutsideModal","isBackBtn"],"mappings":"uGAGA,IAAIA,EACF,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,GAAK,GAE7D,MAAMC,EAAO,CACX,aAAc,SAAS,cAAc,+BAA+B,EACpE,MAAO,SAAS,cAAc,WAAW,EACzC,kBAAmB,SAAS,cAAc,+BAA+B,EACzE,SAAU,SAAS,cAAc,WAAW,CAC9C,EAEA,GAAID,EAAoB,SAAW,EACjCC,EAAK,kBAAkB,UAAU,OAAO,iBAAiB,MACpD,CACL,MAAMC,EAASC,EAAkBH,CAAmB,EACpDC,EAAK,aAAa,UAAYC,CAChC,CAIAD,EAAK,aAAa,iBAAiB,QAASG,CAA0B,EAEtE,SAASA,EAA2B,EAAG,CAErC,GAAI,CADc,EAAE,OAAO,QAAQ,iCAAiC,EACpD,OAEhB,MAAMC,EAAO,EAAE,OAAO,QAAQ,wBAAwB,EAEtD,GAAI,CAACA,EAAM,OAEX,MAAMC,EAAeD,EAAK,QAAQ,GAElCA,EAAK,OAAM,EAEQL,EAAoB,KAAKO,GAAKA,EAAE,MAAQD,CAAY,IAGvEN,EAAsBA,EAAoB,OACxCQ,GAAQA,EAAK,MAAQF,CACzB,EACE,aAAa,QACX,sBACA,KAAK,UAAUN,CAAmB,CACtC,EAEMA,EAAoB,SAAW,GACjCC,EAAK,kBAAkB,UAAU,OAAO,iBAAiB,EAE7D,CAEA;AAEAA,EAAK,aAAa,iBAAiB,QAASQ,CAAoB,EAEhE,SAASA,EAAqB,EAAG,CAC/B,MAAMC,EAAe,EAAE,OAAO,QAAQ,yBAAyB,EAE/D,GAAIA,EAAc,CAChB,MAAML,EAAOK,EAAa,QAAQ,wBAAwB,EAC1D,GAAI,CAACL,GAAQ,CAACL,EAAoB,OAAQ,OAE1C,MAAMM,EAAeD,EAAK,QAAQ,GAC5BM,EAAaX,EAAoB,KACrCQ,GAAQA,EAAK,MAAQF,CAC3B,EAEIL,EAAK,SAAS,UAAYW,EAAyBD,CAAU,EAC7DV,EAAK,SAAS,UAAU,OAAO,iBAAiB,EAEhD,MAAMY,EAAuB,SAAS,cACpC,0BACN,EACQA,IACFA,EAAqB,UAAYD,EAAyBD,CAAU,GAGtEG,EAAyBH,EAAYV,EAAK,QAAQ,CACnD,CACH,CAEA;AAEAA,EAAK,SAAS,iBAAiB,QAAS,SAAU,EAAG,CACnD,MAAMc,EAAa,EAAE,OAAO,QAAQ,yBAAyB,EACvDC,EAAiB,EAAE,SAAWf,EAAK,SACnCgB,EAAY,EAAE,OAAO,QAAQ,uBAAuB,GAEtDF,GAAcC,GAAkBC,IAClChB,EAAK,SAAS,UAAU,IAAI,iBAAiB,CAEjD,CAAC"}