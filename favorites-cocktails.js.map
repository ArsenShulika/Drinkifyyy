{"version":3,"file":"favorites-cocktails.js","sources":["../src/js/modules/init-favorite.js"],"sourcesContent":["import { lookUpCocktails } from '../API/cocktails-api';\nimport { setupModalFavoriteButton } from './modal';\nimport { cocktailTemplateModal, renderFavorites } from './render-function';\nlookUpCocktails;\n\nlet favorites = JSON.parse(localStorage.getItem('favoriteCocktails')) || [];\n\nconst refs = {\n  cocktailList: document.querySelector('.js-cocktails-list'),\n  titel: document.querySelector('.js-titel'),\n  notFoundContainer: document.querySelector('.js-image-not-found-container'),\n  backdrop: document.querySelector('.backdrop'),\n};\n\nif (favorites.length === 0) {\n  refs.titel.textContent = 'Favorite cocktails';\n  refs.notFoundContainer.classList.remove('visually-hidden');\n} else {\n  const markup = renderFavorites(favorites);\n\n  refs.titel.textContent = 'Favorite cocktails';\n  refs.cocktailList.innerHTML = markup;\n}\n\n// ! DELETE FROM FAVORITE\n\nrefs.cocktailList.addEventListener('click', handleChangeFavoriteStatus);\n\nfunction handleChangeFavoriteStatus(e) {\n  const deleteBtn = e.target.closest('[data-type=\"addLikeToFavorite\"]');\n  if (!deleteBtn) return;\n\n  console.log(e.target);\n  const card = e.target.closest('.cocktails-list-item');\n\n  if (!card || !favorites?.length) return;\n\n  const cocktailId = card.dataset.id;\n  console.log(cocktailId);\n  const cocktail = favorites.find(c => c._id === cocktailId);\n  if (!cocktail) return;\n\n  card.remove();\n\n  // Видалити з localStorage за допомогою filter\n  favorites = favorites.filter(c => c._id !== cocktail._id);\n  localStorage.setItem('favoriteCocktails', JSON.stringify(favorites));\n  if (favorites.length === 0) {\n    refs.titel.textContent = 'Favorite cocktails';\n    refs.notFoundContainer.classList.remove('visually-hidden');\n  }\n}\n\n//! --- OPEN MODAL ---\n\nrefs.cocktailList.addEventListener('click', showModalfavorite);\n\nasync function showModalfavorite(e) {\n  const learnMoreBtn = e.target.closest('[data-type=\"learnMore\"]');\n\n  if (learnMoreBtn) {\n    const card = learnMoreBtn.closest('.cocktails-list-item');\n    if (!card || !favorites?.length) return;\n\n    const cocktailId = card.dataset.id;\n    const cocktail = favorites.find(c => c._id === cocktailId);\n    if (!cocktail) return;\n\n    // Рендеримо модалку\n    const clickedCocktail = await lookUpCocktails(cocktailId);\n    refs.backdrop.innerHTML = cocktailTemplateModal(clickedCocktail);\n    refs.backdrop.classList.remove('visually-hidden');\n\n    setupModalFavoriteButton(cocktail, refs.backdrop);\n  }\n}\n\n//!одинакова модалка init-favorites.js i cocktails.js;\n\nrefs.backdrop.addEventListener('click', function (e) {\n  const isCloseBtn = e.target.closest('[data-type=\"close-btn\"]');\n  const isOutsideModal = e.target === refs.backdrop;\n  const isBackBtn = e.target.closest('[data-type=\"backBtn\"]');\n\n  if (isCloseBtn || isOutsideModal || isBackBtn) {\n    refs.backdrop.classList.add('visually-hidden');\n  }\n});\n"],"names":["favorites","refs","markup","renderFavorites","handleChangeFavoriteStatus","e","card","cocktailId","cocktail","c","showModalfavorite","learnMoreBtn","clickedCocktail","lookUpCocktails","cocktailTemplateModal","setupModalFavoriteButton","isCloseBtn","isOutsideModal","isBackBtn"],"mappings":"yGAKA,IAAIA,EAAY,KAAK,MAAM,aAAa,QAAQ,mBAAmB,CAAC,GAAK,GAEzE,MAAMC,EAAO,CACX,aAAc,SAAS,cAAc,oBAAoB,EACzD,MAAO,SAAS,cAAc,WAAW,EACzC,kBAAmB,SAAS,cAAc,+BAA+B,EACzE,SAAU,SAAS,cAAc,WAAW,CAC9C,EAEA,GAAID,EAAU,SAAW,EACvBC,EAAK,MAAM,YAAc,qBACzBA,EAAK,kBAAkB,UAAU,OAAO,iBAAiB,MACpD,CACL,MAAMC,EAASC,EAAgBH,CAAS,EAExCC,EAAK,MAAM,YAAc,qBACzBA,EAAK,aAAa,UAAYC,CAChC,CAIAD,EAAK,aAAa,iBAAiB,QAASG,CAA0B,EAEtE,SAASA,EAA2BC,EAAG,CAErC,GAAI,CADcA,EAAE,OAAO,QAAQ,iCAAiC,EACpD,OAEhB,QAAQ,IAAIA,EAAE,MAAM,EACpB,MAAMC,EAAOD,EAAE,OAAO,QAAQ,sBAAsB,EAEpD,GAAI,CAACC,GAAQ,EAACN,GAAA,MAAAA,EAAW,QAAQ,OAEjC,MAAMO,EAAaD,EAAK,QAAQ,GAChC,QAAQ,IAAIC,CAAU,EACtB,MAAMC,EAAWR,EAAU,KAAKS,GAAKA,EAAE,MAAQF,CAAU,EACpDC,IAELF,EAAK,OAAM,EAGXN,EAAYA,EAAU,OAAOS,GAAKA,EAAE,MAAQD,EAAS,GAAG,EACxD,aAAa,QAAQ,oBAAqB,KAAK,UAAUR,CAAS,CAAC,EAC/DA,EAAU,SAAW,IACvBC,EAAK,MAAM,YAAc,qBACzBA,EAAK,kBAAkB,UAAU,OAAO,iBAAiB,GAE7D,CAEA;AAEAA,EAAK,aAAa,iBAAiB,QAASS,CAAiB,EAE7D,eAAeA,EAAkBL,EAAG,CAClC,MAAMM,EAAeN,EAAE,OAAO,QAAQ,yBAAyB,EAE/D,GAAIM,EAAc,CAChB,MAAML,EAAOK,EAAa,QAAQ,sBAAsB,EACxD,GAAI,CAACL,GAAQ,EAACN,GAAA,MAAAA,EAAW,QAAQ,OAEjC,MAAMO,EAAaD,EAAK,QAAQ,GAC1BE,EAAWR,EAAU,KAAKS,GAAKA,EAAE,MAAQF,CAAU,EACzD,GAAI,CAACC,EAAU,OAGf,MAAMI,EAAkB,MAAMC,EAAgBN,CAAU,EACxDN,EAAK,SAAS,UAAYa,EAAsBF,CAAe,EAC/DX,EAAK,SAAS,UAAU,OAAO,iBAAiB,EAEhDc,EAAyBP,EAAUP,EAAK,QAAQ,CACjD,CACH,CAEA;AAEAA,EAAK,SAAS,iBAAiB,QAAS,SAAUI,EAAG,CACnD,MAAMW,EAAaX,EAAE,OAAO,QAAQ,yBAAyB,EACvDY,EAAiBZ,EAAE,SAAWJ,EAAK,SACnCiB,EAAYb,EAAE,OAAO,QAAQ,uBAAuB,GAEtDW,GAAcC,GAAkBC,IAClCjB,EAAK,SAAS,UAAU,IAAI,iBAAiB,CAEjD,CAAC"}