{"version":3,"file":"index.js","sources":["../src/js/modules/search.js","../src/js/modules/cocktails.js"],"sourcesContent":["// SEARCH COCKTAILS BY LETTER\n\nimport {\n  lookUpCocktails,\n  searchCocktailsByLetter,\n  searchCocktailsByName,\n} from '../API/cocktails-api';\nimport { addToFavorites, setupModalFavoriteButton } from './modal';\nimport { cocktailsTemplate, cocktailTemplateModal } from './render-function';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nconst refs = {\n  sectionTitel: document.querySelector('.js-titel'),\n  cocktailsList: document.querySelector('.js-cocktails-list'),\n  alphabetList: document.querySelector('.js-alphabet-list'),\n  showedletter: document.querySelector('.js-letter'),\n  lettersContainer: document.querySelector('.js-letters-list'),\n  letterBtn: document.querySelector('.js-searck-btn'),\n  form: document.querySelector('.js-form'),\n  container: document.querySelector('.js-pagination'),\n  backdrop: document.querySelector('.backdrop'),\n  addToFavoriteBtn: document.querySelector('.modal-btn-add'),\n  notFoundContainer: document.querySelector('.not-found-container'),\n};\n\nconst favoriteCocktails =\n  JSON.parse(localStorage.getItem('favoriteCocktails')) || [];\nconsole.log(favoriteCocktails);\n\nlet queryLetter = '';\nlet ITEMS_PER_PAGE = 8;\nlet cocktailsArr;\n\nrefs.alphabetList.addEventListener('click', renderCocktailsByLetter);\n\nasync function renderCocktailsByLetter(e) {\n  refs.sectionTitel.textContent = 'Searching results';\n  const item = e.target.closest('.letter-item');\n  if (!item) return;\n\n  queryLetter = item.textContent.trim();\n  refs.showedletter.textContent = queryLetter;\n\n  try {\n    const data = await searchCocktailsByLetter(queryLetter);\n    cocktailsArr = data;\n\n    if (!cocktailsArr || cocktailsArr.length === 0) {\n      // Нічого не знайдено\n      refs.cocktailsList.innerHTML = ''; // Очищуємо коктейлі\n      refs.notFoundContainer.classList.remove('visually-hidden'); // Показуємо блок \"не знайдено\"\n      refs.container.style.display = 'none'; // Ховаємо пагінацію\n      return;\n    }\n\n    refs.notFoundContainer.classList.add('visually-hidden'); // Ховаємо \"не знайдено\"\n    refs.container.style.display = 'block'; // Показуємо пагінацію\n\n    instance.setItemsPerPage(8);\n    instance.setTotalItems(cocktailsArr.length);\n    instance.reset(); // Скидаємо пагінацію на першу сторінку\n    displayPageOfCocktails(1); // Відображаємо першу сторінку коктейлів\n\n    const markup = cocktailsTemplate(data);\n    refs.cocktailsList.innerHTML = markup;\n  } catch (error) {\n    console.log('Error fetching cocktails:', error);\n    refs.cocktailsList.innerHTML = '';\n    refs.sectionTitel.classList.add('visually-hidden');\n    refs.notFoundContainer.classList.remove('visually-hidden');\n    refs.container.style.display = 'none';\n  }\n}\n\n// Функція для відображення коктейлів для поточної сторінки\nfunction displayPageOfCocktails(page) {\n  const startIndex = (page - 1) * ITEMS_PER_PAGE;\n  const endIndex = startIndex + ITEMS_PER_PAGE;\n  const cocktailsToDisplay = cocktailsArr.slice(startIndex, endIndex);\n  const markup = cocktailsTemplate(cocktailsToDisplay);\n  refs.cocktailsList.innerHTML = markup;\n}\n\nrefs.letterBtn.addEventListener('click', () => {\n  refs.lettersContainer.classList.toggle('is-open');\n});\n\nrefs.lettersContainer.addEventListener('click', () => {\n  refs.lettersContainer.classList.remove('is-open');\n});\n\n// SEARCH COCKTAILS BY LETTER\n\n// SEARCH COCKTAILS BY NAME\n\nrefs.form.addEventListener('submit', renderCocktailsByName);\n\nasync function renderCocktailsByName(e) {\n  e.preventDefault();\n\n  refs.sectionTitel.textContent = 'Searching results';\n  const formData = new FormData(refs.form);\n  const queryCocktailName = formData.get('query');\n  if (!queryCocktailName) return;\n\n  try {\n    const data = await searchCocktailsByName(queryCocktailName);\n    const markup = cocktailsTemplate(data);\n    refs.cocktailsList.innerHTML = markup;\n  } catch (error) {\n    console.log('Error fetching cocktails:', error);\n    refs.cocktailsList.innerHTML =\n      '<p class=\"error\">Failed to load cocktails.</p>';\n  }\n}\n\n// SEARCH COCKTAILS BY NAME\n\n// TUI PAGINATION\n\nconst instance = new Pagination(refs.container, {\n  totalItems: 0,\n  itemsPerPage: ITEMS_PER_PAGE,\n  visiblePages: 3,\n});\n\ninstance.on('afterMove', event => {\n  const currentPage = event.page;\n  displayPageOfCocktails(currentPage);\n});\n\n//! --- OPEN MODAL ---\nrefs.cocktailsList.addEventListener('click', showModalCocktail);\n\nasync function showModalCocktail(e) {\n  e.preventDefault();\n  const learnMoreBtn = e.target.closest('[data-type=\"learnMore\"]');\n  const likeBtn = e.target.closest('[data-type=\"addLikeToFavorite\"]');\n\n  if (learnMoreBtn) {\n    const card = learnMoreBtn.closest('.cocktails-list-item');\n    if (!card || !cocktailsArr?.length) return;\n\n    const cocktailId = card.dataset.id;\n    const cocktail = cocktailsArr.find(c => c._id === cocktailId);\n    if (!cocktail) return;\n\n    const clickedCocktail = await lookUpCocktails(cocktailId);\n\n    // Рендеримо модалку\n    refs.backdrop.innerHTML = cocktailTemplateModal(clickedCocktail);\n    refs.backdrop.classList.remove('visually-hidden');\n\n    setupModalFavoriteButton(cocktail, refs.backdrop);\n  }\n\n  //! --- TOGGLE FAVORITE ---\n\n  if (likeBtn) {\n    const card = likeBtn.closest('.cocktails-list-item');\n    if (!card || !cocktailsArr?.length) return;\n\n    const cocktailId = card.dataset.id;\n    const cocktail = cocktailsArr.find(c => c._id === cocktailId);\n    if (!cocktail) return;\n\n    let favorites = JSON.parse(localStorage.getItem('favoriteCocktails')) || [];\n    const isFavorite = favorites.some(c => c._id === cocktail._id);\n    const icon = likeBtn.querySelector('.cocktails-icon');\n\n    if (isFavorite) {\n      // Видалити з localStorage за допомогою filter\n      favorites = favorites.filter(c => c._id !== cocktail._id);\n      localStorage.setItem('favoriteCocktails', JSON.stringify(favorites));\n      icon.style.fill = 'transparent';\n    } else {\n      addToFavorites(cocktail);\n      icon.style.fill = '#ffffff';\n    }\n  }\n}\n","import { getRandomCocktails, lookUpCocktails } from '../API/cocktails-api';\nimport { addToFavorites, setupModalFavoriteButton } from './modal';\nimport { cocktailsTemplate, cocktailTemplateModal } from './render-function';\n\nconst favoriteCocktails =\n  JSON.parse(localStorage.getItem('favoriteCocktails')) || [];\nconsole.log(favoriteCocktails);\n\nconst previousCocktail = JSON.parse(localStorage.getItem('currentCocktail'));\n\n// const favoriteIngredients =\n//   JSON.parse(localStorage.getItem('favoriteIngredients')) || [];\n\nlet cocktailsArr;\n\n// RANDOM COCKTAILS\n\nconst refs = {\n  cocktailsList: document.querySelector('.js-cocktails-list'),\n  container: document.querySelector('.js-pagination'),\n  backdrop: document.querySelector('.backdrop'),\n  likeBtn: document.querySelector('.cocktails-btn-like'),\n  modalList: document.querySelector('.js-modal-list'),\n  modalDiv: document.querySelector('.modal-ingredients'),\n};\n\ndocument.addEventListener('DOMContentLoaded', renderCocktails);\n\nasync function renderCocktails() {\n  const data = await getRandomCocktails();\n  cocktailsArr = data;\n  /* просто коктелі зберігати в масив треба було в глобальному скоупі */ const markup =\n    cocktailsTemplate(data);\n  refs.cocktailsList.innerHTML = markup;\n  refs.container.style.display = 'none';\n}\n\n// RANDOM COCKTAILS\n\n// ! MODAL COCKTAIL\n\nrefs.cocktailsList.addEventListener('click', showModalCocktail);\n\nexport async function showModalCocktail(e) {\n  const learnMoreBtn = e.target.closest('[data-type=\"learnMore\"]');\n  const likeBtn = e.target.closest('[data-type=\"addLikeToFavorite\"]');\n\n  //! --- OPEN MODAL ---\n  if (learnMoreBtn) {\n    const card = learnMoreBtn.closest('.cocktails-list-item');\n    if (!card || !cocktailsArr?.length) return;\n\n    const cocktailId = card.dataset.id;\n    const cocktail = cocktailsArr.find(c => c._id === cocktailId);\n    if (!cocktail) return;\n\n    const clickedCocktail = await lookUpCocktails(cocktailId);\n    console.log(clickedCocktail);\n    localStorage.setItem('currentCocktail', JSON.stringify(clickedCocktail));\n\n    // Рендеримо модалку\n    refs.backdrop.innerHTML = cocktailTemplateModal(clickedCocktail);\n    refs.backdrop.classList.remove('visually-hidden');\n\n    setupModalFavoriteButton(cocktail, refs.backdrop);\n  }\n\n  //! Закриваємо вікно!!!\n\n  refs.backdrop.addEventListener('click', function (e) {\n    const isCloseBtn = e.target.closest('[data-type=\"close-btn\"]');\n    const isOutsideModal = e.target === refs.backdrop;\n    const isBackToCocktail = e.target.closest('[data-type=\"backToCocktail\"]');\n    const isBackBtn = e.target.closest('[data-type=\"backBtn\"]');\n\n    const previousCocktail = JSON.parse(\n      localStorage.getItem('currentCocktail')\n    );\n\n    if (isCloseBtn || isOutsideModal || isBackBtn) {\n      refs.backdrop.classList.add('visually-hidden');\n      refs.backdrop.innerHTML = '';\n      return;\n    }\n\n    // Назад до коктейлю\n    if (isBackToCocktail && previousCocktail) {\n      refs.backdrop.innerHTML = cocktailTemplateModal(previousCocktail);\n      refs.backdrop.classList.remove('visually-hidden');\n      setupModalFavoriteButton(previousCocktail, refs.backdrop);\n    }\n  });\n\n  //! --- TOGGLE FAVORITE ---\n\n  if (likeBtn) {\n    const card = likeBtn.closest('.cocktails-list-item');\n    if (!card || !cocktailsArr?.length) return;\n\n    const cocktailId = card.dataset.id;\n    const cocktail = cocktailsArr.find(c => c._id === cocktailId);\n    if (!cocktail) return;\n\n    let favorites = JSON.parse(localStorage.getItem('favoriteCocktails')) || [];\n    const isFavorite = favorites.some(c => c._id === cocktail._id);\n    const icon = likeBtn.querySelector('.cocktails-icon');\n\n    if (isFavorite) {\n      // Видалити з localStorage за допомогою filter\n      favorites = favorites.filter(c => c._id !== cocktail._id);\n      localStorage.setItem('favoriteCocktails', JSON.stringify(favorites));\n      icon.style.fill = 'transparent';\n    } else {\n      addToFavorites(cocktail);\n      icon.style.fill = '#ffffff';\n    }\n  }\n}\n"],"names":["refs","favoriteCocktails","queryLetter","ITEMS_PER_PAGE","cocktailsArr","renderCocktailsByLetter","e","item","data","searchCocktailsByLetter","instance","displayPageOfCocktails","markup","cocktailsTemplate","error","page","startIndex","endIndex","cocktailsToDisplay","renderCocktailsByName","queryCocktailName","searchCocktailsByName","Pagination","event","currentPage","showModalCocktail","learnMoreBtn","likeBtn","card","cocktailId","cocktail","c","clickedCocktail","lookUpCocktails","cocktailTemplateModal","setupModalFavoriteButton","favorites","isFavorite","icon","addToFavorites","renderCocktails","getRandomCocktails","isCloseBtn","isOutsideModal","isBackToCocktail","isBackBtn","previousCocktail"],"mappings":"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"}