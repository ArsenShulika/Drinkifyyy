import{s as h,c as y,a as T,l as C,b as g,d as L,e as S,g as M}from"./assets/mobile-menu-GZoW4i4e.js";import{P as q}from"./assets/vendor-Gv3iafvG.js";const t={sectionTitel:document.querySelector(".js-titel"),cocktailsList:document.querySelector(".js-cocktails-list"),alphabetList:document.querySelector(".js-alphabet-list"),showedletter:document.querySelector(".js-letter"),lettersContainer:document.querySelector(".js-letters-list"),letterBtn:document.querySelector(".js-searck-btn"),form:document.querySelector(".js-form"),container:document.querySelector(".js-pagination"),backdrop:document.querySelector(".backdrop"),addToFavoriteBtn:document.querySelector(".modal-btn-add"),notFoundContainer:document.querySelector(".not-found-container")},I=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];console.log(I);let p="",v=8,l;t.alphabetList.addEventListener("click",B);async function B(o){t.sectionTitel.textContent="Searching results";const i=o.target.closest(".letter-item");if(i){p=i.textContent.trim(),t.showedletter.textContent=p;try{const a=await h(p);if(l=a,!l||l.length===0){t.cocktailsList.innerHTML="",t.notFoundContainer.classList.remove("visually-hidden"),t.container.style.display="none";return}t.notFoundContainer.classList.add("visually-hidden"),t.container.style.display="block",m.setItemsPerPage(8),m.setTotalItems(l.length),m.reset(),b(1);const e=y(a);t.cocktailsList.innerHTML=e}catch(a){console.log("Error fetching cocktails:",a),t.cocktailsList.innerHTML="",t.sectionTitel.classList.add("visually-hidden"),t.notFoundContainer.classList.remove("visually-hidden"),t.container.style.display="none"}}}function b(o){const i=(o-1)*v,a=i+v,e=l.slice(i,a),n=y(e);t.cocktailsList.innerHTML=n}t.letterBtn.addEventListener("click",()=>{t.lettersContainer.classList.toggle("is-open")});t.lettersContainer.addEventListener("click",()=>{t.lettersContainer.classList.remove("is-open")});t.form.addEventListener("submit",_);async function _(o){o.preventDefault(),t.sectionTitel.textContent="Searching results";const a=new FormData(t.form).get("query");if(a)try{const e=await T(a),n=y(e);t.cocktailsList.innerHTML=n}catch(e){console.log("Error fetching cocktails:",e),t.cocktailsList.innerHTML='<p class="error">Failed to load cocktails.</p>'}}const m=new q(t.container,{totalItems:0,itemsPerPage:v,visiblePages:3});m.on("afterMove",o=>{const i=o.page;b(i)});//! --- OPEN MODAL ---
t.cocktailsList.addEventListener("click",E);async function E(o){o.preventDefault();const i=o.target.closest('[data-type="learnMore"]'),a=o.target.closest('[data-type="addLikeToFavorite"]');if(i){const e=i.closest(".cocktails-list-item");if(!e||!(l!=null&&l.length))return;const n=e.dataset.id,s=l.find(k=>k._id===n);if(!s)return;const c=await C(n);t.backdrop.innerHTML=g(c),t.backdrop.classList.remove("visually-hidden"),L(s,t.backdrop)}//! --- TOGGLE FAVORITE ---
if(a){const e=a.closest(".cocktails-list-item");if(!e||!(l!=null&&l.length))return;const n=e.dataset.id,s=l.find(d=>d._id===n);if(!s)return;let c=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];const k=c.some(d=>d._id===s._id),u=a.querySelector(".cocktails-icon");k?(c=c.filter(d=>d._id!==s._id),localStorage.setItem("favoriteCocktails",JSON.stringify(c)),u.style.fill="transparent"):(S(s),u.style.fill="#ffffff")}}const F=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];console.log(F);JSON.parse(localStorage.getItem("currentCocktail"));let f;const r={cocktailsList:document.querySelector(".js-cocktails-list"),container:document.querySelector(".js-pagination"),backdrop:document.querySelector(".backdrop"),likeBtn:document.querySelector(".cocktails-btn-like"),modalList:document.querySelector(".js-modal-list"),modalDiv:document.querySelector(".modal-ingredients")};document.addEventListener("DOMContentLoaded",N);async function N(){const o=await M();f=o;const i=y(o);r.cocktailsList.innerHTML=i,r.container.style.display="none"}r.cocktailsList.addEventListener("click",O);async function O(o){const i=o.target.closest('[data-type="learnMore"]'),a=o.target.closest('[data-type="addLikeToFavorite"]');//! --- OPEN MODAL ---
if(i){const e=i.closest(".cocktails-list-item");if(!e||!(f!=null&&f.length))return;const n=e.dataset.id,s=f.find(k=>k._id===n);if(!s)return;const c=await C(n);console.log(c),localStorage.setItem("currentCocktail",JSON.stringify(c)),r.backdrop.innerHTML=g(c),r.backdrop.classList.remove("visually-hidden"),L(s,r.backdrop)}//! Закриваємо вікно!!!
r.backdrop.addEventListener("click",function(e){const n=e.target.closest('[data-type="close-btn"]'),s=e.target===r.backdrop,c=e.target.closest('[data-type="backToCocktail"]'),k=e.target.closest('[data-type="backBtn"]'),u=JSON.parse(localStorage.getItem("currentCocktail"));if(n||s||k){r.backdrop.classList.add("visually-hidden"),r.backdrop.innerHTML="";return}c&&u&&(r.backdrop.innerHTML=g(u),r.backdrop.classList.remove("visually-hidden"),L(u,r.backdrop))});//! --- TOGGLE FAVORITE ---
if(a){const e=a.closest(".cocktails-list-item");if(!e||!(f!=null&&f.length))return;const n=e.dataset.id,s=f.find(d=>d._id===n);if(!s)return;let c=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];const k=c.some(d=>d._id===s._id),u=a.querySelector(".cocktails-icon");k?(c=c.filter(d=>d._id!==s._id),localStorage.setItem("favoriteCocktails",JSON.stringify(c)),u.style.fill="transparent"):(S(s),u.style.fill="#ffffff")}}
//# sourceMappingURL=index.js.map
