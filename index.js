import{s as h,c as p,a as q,l as L,b as v,d as S,e as C,g as M}from"./assets/mobile-menu-BWHXCWWr.js";import{P as T}from"./assets/vendor-Gv3iafvG.js";const o={sectionTitel:document.querySelector(".js-titel"),cocktailsList:document.querySelector(".js-cocktails-list"),alphabetList:document.querySelector(".js-alphabet-list"),showedletter:document.querySelector(".js-letter"),lettersContainer:document.querySelector(".js-letters-list"),letterBtn:document.querySelector(".js-searck-btn"),form:document.querySelector(".js-form"),container:document.querySelector(".js-pagination"),backdrop:document.querySelector(".backdrop"),addToFavoriteBtn:document.querySelector(".modal-btn-add")},I=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];console.log(I);let g="",y=8,l;o.alphabetList.addEventListener("click",B);async function B(t){o.sectionTitel.textContent="Searching results";const s=t.target.closest(".letter-item");if(s){g=s.textContent.trim(),o.showedletter.textContent=g;try{const a=await h(g);l=a,console.log(l),m.setItemsPerPage(8);const e=p(a);m.setTotalItems(l.length),m.reset(),b(1),o.cocktailsList.innerHTML=e}catch(a){console.log("Error fetching cocktails:",a),o.cocktailsList.innerHTML='<p class="error">Failed to load cocktails.</p>'}o.container.style.display="block"}}function b(t){const s=(t-1)*y,a=s+y,e=l.slice(s,a),n=p(e);o.cocktailsList.innerHTML=n}o.letterBtn.addEventListener("click",()=>{o.lettersContainer.classList.toggle("is-open")});o.lettersContainer.addEventListener("click",()=>{o.lettersContainer.classList.remove("is-open")});o.form.addEventListener("submit",_);async function _(t){t.preventDefault(),o.sectionTitel.textContent="Searching results";const a=new FormData(o.form).get("query");if(a)try{const e=await q(a),n=p(e);o.cocktailsList.innerHTML=n}catch(e){console.log("Error fetching cocktails:",e),o.cocktailsList.innerHTML='<p class="error">Failed to load cocktails.</p>'}}const m=new T(o.container,{totalItems:0,itemsPerPage:y,visiblePages:3});m.on("afterMove",t=>{const s=t.page;b(s)});//! --- OPEN MODAL ---
o.cocktailsList.addEventListener("click",E);async function E(t){t.preventDefault();const s=t.target.closest('[data-type="learnMore"]'),a=t.target.closest('[data-type="addLikeToFavorite"]');if(s){const e=s.closest(".cocktails-list-item");if(!e||!(l!=null&&l.length))return;const n=e.dataset.id,c=l.find(f=>f._id===n);if(!c)return;const i=await L(n);o.backdrop.innerHTML=v(i),o.backdrop.classList.remove("visually-hidden"),S(c,o.backdrop)}//! --- TOGGLE FAVORITE ---
if(a){const e=a.closest(".cocktails-list-item");if(!e||!(l!=null&&l.length))return;const n=e.dataset.id,c=l.find(r=>r._id===n);if(!c)return;let i=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];const f=i.some(r=>r._id===c._id),u=a.querySelector(".cocktails-icon");f?(i=i.filter(r=>r._id!==c._id),localStorage.setItem("favoriteCocktails",JSON.stringify(i)),u.style.fill="transparent"):(C(c),u.style.fill="#ffffff")}}const j=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];console.log(j);JSON.parse(localStorage.getItem("favoriteIngredients"));let d;const k={cocktailsList:document.querySelector(".js-cocktails-list"),container:document.querySelector(".js-pagination"),backdrop:document.querySelector(".backdrop"),likeBtn:document.querySelector(".cocktails-btn-like"),modalList:document.querySelector(".js-modal-list")};document.addEventListener("DOMContentLoaded",w);async function w(){const t=await M();d=t;const s=p(t);k.cocktailsList.innerHTML=s,k.container.style.display="none"}k.cocktailsList.addEventListener("click",P);async function P(t){const s=t.target.closest('[data-type="learnMore"]'),a=t.target.closest('[data-type="addLikeToFavorite"]');//! --- OPEN MODAL ---
if(s){const e=s.closest(".cocktails-list-item");if(!e||!(d!=null&&d.length))return;const n=e.dataset.id,c=d.find(f=>f._id===n);if(!c)return;const i=await L(n);console.log(i),k.backdrop.innerHTML=v(i),k.backdrop.classList.remove("visually-hidden"),S(c,k.backdrop)}//! --- TOGGLE FAVORITE ---
if(a){const e=a.closest(".cocktails-list-item");if(!e||!(d!=null&&d.length))return;const n=e.dataset.id,c=d.find(r=>r._id===n);if(!c)return;let i=JSON.parse(localStorage.getItem("favoriteCocktails"))||[];const f=i.some(r=>r._id===c._id),u=a.querySelector(".cocktails-icon");f?(i=i.filter(r=>r._id!==c._id),localStorage.setItem("favoriteCocktails",JSON.stringify(i)),u.style.fill="transparent"):(C(c),u.style.fill="#ffffff")}}//! Закриваємо вікно!!!
k.backdrop.addEventListener("click",function(t){const s=t.target.closest('[data-type="close-btn"]'),a=t.target===k.backdrop,e=t.target.closest('[data-type="backBtn"]');(s||a||e)&&k.backdrop.classList.add("visually-hidden")});
//# sourceMappingURL=index.js.map
